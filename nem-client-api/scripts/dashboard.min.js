"use strict";define(["jquery","ncc"],function(e,n){return function(){var t=["wallet","dashboard"],a=[["rv!layout/wallet-pages","wallet-setup"],["rv!layout/dashboard","dashboard-setup"]];n.reload(t,a);var s=function(){var e={wallet:n.getPageParam("wallet"),account:n.getPageParam("account"),recipient:"A"};return function(t){e.amount=n.get("sendTransactionForm.amount"),e.message=n.get("sendTransactionForm.message")&&n.get("sendTransactionForm.message").toString(),n.postRequest("wallet/account/transaction/fee",e,function(e){var a=n.get("sendTransactionForm.fee"),s=e.fee/1e6;(s||0===s)&&(t.surelyReset||s>a)&&(n.set("sendTransactionForm.fee",s),n.set("sendTransactionForm.isFeeAutofilled",!0))},{},t.silent)}}();n.observe("sendTransactionForm.fee",function(){n.set("sendTransactionForm.isFeeAutofilled",!1)}),n.observe("sendTransactionForm.amount sendTransactionForm.message",function(){(n.get("sendTransactionForm.amount")||0===n.get("sendTransactionForm.amount"))&&s({surelyReset:n.get("sendTransactionForm.isFeeAutofilled"),silent:!0})}),n.set("sendTransactionForm",{isFeeAutofilled:!0,dueBy:12}),n.on({resetFee:function(){s({surelyReset:!0,silent:!1})},sendTransaction:function(){var t={wallet:n.getPageParam("wallet"),password:n.get("sendTransactionForm.password"),account:n.getPageParam("account"),recipient:n.recoverAddress(e(".recipient.form-control").val()),amount:n.get("sendTransactionForm.amount"),message:n.get("sendTransactionForm.message")&&n.get("sendTransactionForm.message").toString(),fee:n.get("sendTransactionForm.fee"),hours_due:n.get("sendTransactionForm.dueBy")};n.postRequest("wallet/account/transaction/send",t,function(e){e.ok?n.showMessage("Transaction has been sent successfully!"):n.showError()})},closeWallet:function(){n.postRequest("wallet/close",{wallet:n.getPageParam("wallet")},function(e){e.ok?window.location="landing.html":n.showError()})}})}});